/*! For license information please see main.b46d8b4c.chunk.js.LICENSE.txt */
(this.webpackJsonpsstock=this.webpackJsonpsstock||[]).push([[0],{134:function(e,t,a){e.exports=a(167)},141:function(e,t,a){},152:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){e.exports=a.p+"static/media/logo.e27c8735.png"},166:function(e,t,a){e.exports=a.p+"static/media/loading.a57e7c9a.gif"},167:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(31),c=a.n(o),l=(a(81),a(16)),i=a(17),s=a(18),u=a(45),m=a(20),d=a(19),p=(a(141),a(142),a(143),a(5)),f={"\u80a1\u5229":1,"\u85aa\u8cc7":2,"\u624b\u7e8c\u8cbb\u6298":3},h=function(e){var t=e.source,a=null;if(t)switch(Object.keys(f).forEach((function(e){a||(a=-1!==t.search(e)&&f[e])})),a){case 1:return"red";case 2:return"green";case 3:return"purple";default:return"black"}},g=Object(p.a)("td")((function(e){return{color:h(e)}})),b={},v=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state=b,n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.record,a=e.index;return r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},a),r.a.createElement("td",null,parseFloat(t.account_record_Money).toFixed(0)),r.a.createElement("td",null,parseFloat(t.account_record_Stock).toFixed(0)),r.a.createElement("td",null,t.transfer),r.a.createElement("td",null,"\u8f49\u51fa"===t.transferStatus?"\u8f49\u51fa":"\u5b58\u5165"),r.a.createElement("td",null,t.transferTime),r.a.createElement(g,{source:t.source},t.source))}}]),a}(n.Component),y={isMobile:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(e.substr(0,4)))&&(t=!0),/\(macintosh; intel mac os x 10_15\)/i.test(e)&&(t=!0),t}},E=a(32),w=a(23),k=(a(89),a(84),a(147),a(149),[31,28,31,30,31,30,31,31,30,31,30,31]),x={dateFormat:function(e){return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)},toDualDigit:function(e){return e<10?"0"+e:e},days:function(e,t){return console.log(e,t),(e%4===0&&e%100!==0||e%400===0)&&2===t?29:k[t]}},S={user_id:"",country:"tw"};function O(){O=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(N){l=function(e,t,a){return e[t]=a}}function i(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),c=new x(n||[]);return o._invoke=function(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return C()}for(a.method=r,a.arg=o;;){var c=a.delegate;if(c){var l=E(c,a);if(l){if(l===u)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=s(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===u)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}(e,a,c),o}function s(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(N){return{type:"throw",arg:N}}}e.wrap=i;var u={};function m(){}function d(){}function p(){}var f={};l(f,r,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(S([])));g&&g!==t&&a.call(g,r)&&(f=g);var b=p.prototype=m.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var n;this._invoke=function(r,o){function c(){return new t((function(n,c){!function n(r,o,c,l){var i=s(e[r],e,o);if("throw"!==i.type){var u=i.arg,m=u.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,l)}),(function(e){n("throw",e,c,l)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,l)}))}l(i.arg)}(r,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function S(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=p,l(b,"constructor",p),l(p,"constructor",d),d.displayName=l(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(y.prototype),l(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var c=new y(i(t,a,n,r),o);return e.isGeneratorFunction(a)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},v(b),l(b,c,"Generator"),l(b,r,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=S,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=a.call(o,"catchLoc"),i=a.call(o,"finallyLoc");if(l&&i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),k(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;k(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:S(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},e}var C;w.initializeApp({apiKey:"AIzaSyCHZGM1JyAUp_8_lm4OQFLviuiXFJJto5o",authDomain:"stock-f7053.firebaseapp.com",databaseURL:"https://stock-f7053.firebaseio.com",projectId:"stock-f7053",storageBucket:"stock-f7053.appspot.com",messagingSenderId:"1056992757888",appId:"1:1056992757888:web:2067426b1bcf54fd7c3e65",measurementId:"G-V0QBQ3VNJF"}),w.analytics();var N,_,j,F,D,M,I,A,L,R={getAllData:function(){var e=this;return Object(E.a)(O().mark((function t(){var a;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=w.database().ref("/account_data/".concat(S.user_id,"/").concat(S.country,"/stock_info")),t.next=3,a.once("value").then(function(){var t=Object(E.a)(O().mark((function t(a){var n,r,o,c,l,i,s,u,m,d;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],a.forEach((function(e){n.unshift(e.val())})),r=n.sort((function(e,t){return e.date<t.date?1:-1})),o=r.filter((function(e){return"sale"!==e.status})).sort((function(e,t){return e.date<t.date?1:-1})),c=r.filter((function(e){return"sale"===e.status})).sort((function(e,t){return e.sale_date>t.sale_date?1:-1})),!n){t.next=15;break}for(u in l=0,i=0,s=0,n)l+="unsale"===n[u].status?n[u].cost:0;for(m in n)i+="sale"===n[m].status?n[m].income:0,s+="sale"===n[m].status?n[m].cost:0;return t.next=13,e.getLastYearROI(n);case 13:d=t.sent,C={lastYearROI:d,showStocks:n,allStocks:n,saleStocks:c,unSaleStocks:o,totalCost:l,profitAndLoss:i,saleCost:s,profit:Math.floor(i/s*100)};case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:return t.abrupt("return",C);case 4:case"end":return t.stop()}}),t)})))()},insertNewData:function(e,t){return Object(E.a)(O().mark((function a(){var n,r,o,c;return O().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=Math.floor(Date.now()/1e3),r=Math.floor(1e3*e.price*e.sheet*1.001425),o=e.price*e.sheet,c=w.database().ref("/account_data/".concat(S.user_id,"/").concat(S.country,"/stock_info")),a.next=6,c.child(n.toString()).set({timestamp:n,date:e.date,name:e.name,number:e.number,price:e.price,sheet:e.sheet,cost:"US_account"===t?o:r,income:0,sale_cost:0,sale_date:0,sale_price:0,sale_sheet:0,status:"unsale"}).then((function(){console.log("insert new stock successfully")})).catch((function(e){console.error("insert new stock failed\uff1a",e)}));case 6:case"end":return a.stop()}}),a)})))()},deleteStock:function(e){return Object(E.a)(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w.database().ref("/account_data/".concat(S.user_id,"/").concat(S.country,"/stock_info")).child("".concat(e)).remove().then((function(){console.log("delete stock successfully")})).catch((function(e){console.error("delete failed\uff1a",e)}));case 2:case"end":return t.stop()}}),t)})))()},updateStock:function(e,t,a,n){return Object(E.a)(O().mark((function r(){var o,c,l,i,s,u,m;return O().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=a.date==x.dateFormat(new Date),c=Math.round(1e3*e*t)-Math.floor(1e3*e*t*.001425)-Math.floor(1e3*e*t*.003*(o?.5:1))-a.cost,l=Math.round(1e3*e*t)-Math.floor(1e3*e*t*.001425)-Math.floor(1e3*e*t*.003*(o?.5:1)),i=e*t-a.cost,s=e*t,u=x.dateFormat(new Date),m=w.database().ref("/account_data/".concat(S.user_id,"/").concat(S.country,"/stock_info")),r.next=9,m.child(a.timestamp).update({income:"US_account"===n?i:c,sale_cost:"US_account"===n?s:l,sale_date:u,sale_price:e,sale_sheet:t,status:"sale"});case 9:case"end":return r.stop()}}),r)})))()},getAccount:function(){return Object(E.a)(O().mark((function e(){var t,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=w.database().ref("/account_data/".concat(S.user_id,"/").concat(S.country,"/account_summary")),e.next=4,a.once("value").then((function(e){t=e.val()}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))()},getAccountRecord:function(){return Object(E.a)(O().mark((function e(){var t,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=w.database().ref("/account_data/".concat(S.user_id,"/").concat(S.country,"/account_record")),e.next=4,a.once("value").then((function(e){e.forEach((function(e){t.unshift(e.val())}))}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))()},tradeForAccount:function(e,t){return Object(E.a)(O().mark((function a(){var n,r,o,c,l,i,s,u,m;return O().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=[],r=0,o=x.dateFormat(new Date),c=Math.floor(Date.now()/1e3),l=w.database().ref("/account_data/".concat(S.user_id,"/").concat(S.country,"/account_summary")),i=w.database().ref("/account_data/".concat(S.user_id,"/").concat(S.country,"/account_record")),a.next=8,l.once("value").then((function(e){n=e.val()}));case 8:return r="transferOut"===e.transferStatus?"Taiwan_account"===t?-1*parseInt(e.price):-1*parseFloat(e.price):"Taiwan_account"===t?parseInt(e.price):parseFloat(e.price),s=("Taiwan_account"===t?parseInt(n.accountMoney):parseFloat(n.accountMoney))+r,u="Taiwan_account"===t?parseInt(n.accountStock):parseFloat(n.accountStock),m=s+u,a.next=14,l.update({accountMoney:s.toFixed(0),accountStock:u.toFixed(0),summary:m.toFixed(0)});case 14:return a.next=16,i.child(c.toString()).set({timestamp:c,account_record_Money:s.toFixed(0),account_record_Stock:u.toFixed(0),source:e.source,transfer:e.price,transferStatus:"transferIn"===e.transferStatus?"\u8f49\u51fa":"\u5b58\u5165",transferTime:o});case 16:return a.abrupt("return");case 17:case"end":return a.stop()}}),a)})))()},updateAccountRecord:function(e,t,a){return Object(E.a)(O().mark((function n(){var r,o,c,l,i,s,u,m,d,p;return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Math.floor(Date.now()/1e3),o=x.dateFormat(new Date),c=[],l=w.database().ref("/account_data/".concat(S.user_id,"/").concat(S.country,"/account_summary")),n.next=6,l.once("value").then((function(e){c=e.val()}));case 6:return i=0,s=0,u=0,m=0,d=e.date==x.dateFormat(new Date),"US_account"!==a?t?(m=Math.round(1e3*e.price*e.sheet)-Math.floor(1e3*e.price*e.sheet*.001425)-Math.floor(1e3*e.price*e.sheet*(d?.5:1)*.003),i=parseInt(c.accountMoney)+m,s=parseInt(c.accountStock)-e.cost):(u=Math.round(1e3*e.price*e.sheet)+Math.floor(1e3*e.price*e.sheet*.001425),i=parseInt(c.accountMoney)-u,s=parseInt(c.accountStock)+u):t?(m=parseFloat(e.price)*parseFloat(e.sheet),u=parseFloat(e.cost),i=parseFloat(c.accountMoney)+parseFloat(m),s=parseFloat(c.accountStock)-u):(u=parseFloat(e.price)*parseFloat(e.sheet),i=parseFloat(c.accountMoney)-u,s=parseFloat(c.accountStock)+u),i=parseFloat(i.toFixed(2)),s=parseFloat(s.toFixed(2)),n.next=16,l.update({accountMoney:i,accountStock:s,summary:(i+s).toFixed(2)});case 16:return p=w.database().ref("/account_data/".concat(S.user_id,"/").concat(S.country,"/account_record")),n.next=19,p.child(r.toString()).set({timestamp:r,account_record_Money:i,account_record_Stock:s,source:"\u80a1\u7968",transfer:t?m:u,transferTime:o,transferStatus:t?"\u8f49\u51fa":"\u5b58\u5165"});case 19:return n.abrupt("return");case 20:case"end":return n.stop()}}),n)})))()},getLastYearROI:function(e){var t=this;return Object(E.a)(O().mark((function a(){var n,r,o,c,l,i,s,u,m,d,p,f,h,g,b,v,y;return O().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.getAccount();case 2:for(f in n=a.sent,r=parseInt(n.summary),o=x.dateFormat(new Date((new Date).getFullYear()-1,0,1)),c=x.dateFormat(new Date((new Date).getFullYear()-1,11,31)),l=x.dateFormat(new Date((new Date).getFullYear(),0,1)),i=x.dateFormat(new Date((new Date).getFullYear(),11,31)),s=e.filter((function(e){return o<=e.sale_date&&e.sale_date<=c})),u=e.filter((function(e){return l<=e.sale_date&&e.sale_date<=i})),m=0,d=0,p=0,s)m+=s[f].income;for(h in u)d+=u[h].income;return a.next=17,t.getAccountRecord();case 17:for(v in g=a.sent,b=g.filter((function(e){return l<=e.transferTime&&e.transferTime<=i})))p+="\u80a1\u7968"!==b[v].source?parseInt(b[v].transfer):0;return y=m/(r-d-p),a.abrupt("return",y.toFixed(4));case 22:case"end":return a.stop()}}),a)})))()}},T=(a(69),{date:new Date,price:"",transferStatus:"transferIn",source:""}),P=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).inputSource=function(e){n.setState({source:e})},n.submitTrade=function(){var e=n.state,t=e.price,a=e.transferStatus,r=e.source,o=n.props.whichAccount;if(!a||!r||isNaN(t))return alert("\u4e0d\u8a31\u6709\u4efb\u4f55\u4e00\u500b\u70ba\u7a7a");var c=n.props,l={price:t,transferStatus:a,source:r};R.tradeForAccount(l,o).then((function(){c.callback(o)})),n.setState({price:"",source:""})},n.getStyleOfButton=function(){return y.isMobile()?{margin:"4px  0px"}:{margin:"0px  0px"}},n.handleChange=function(e){n.setState({price:e})},n.getTransferOptions=function(e){return n.setState({transferStatus:e.target.value})},n.state=T,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{margin:"5px 5px"}},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u91d1\u984d",onChange:function(t){return e.handleChange(t.target.value)},value:this.state.price})),r.a.createElement("div",{className:"from-group col-md-2 input-sale-frame"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u4f86\u6e90",onChange:function(t){return e.inputSource(t.target.value)},value:this.state.source})),r.a.createElement("div",{className:"btn-group btn-group-toggle from-group col-md-2","data-toggle":"buttons",style:Object(l.a)({},this.getStyleOfButton())},r.a.createElement("label",{className:"btn btn-warning active",onClick:this.getTransferOptions},r.a.createElement("input",{type:"radio",name:"stockOption",id:"individual",value:"transferIn",autoComplete:"off"})," \u5b58\u5165"),r.a.createElement("label",{className:"btn btn-warning",onClick:this.getTransferOptions},r.a.createElement("input",{type:"radio",name:"stockOption",id:"mutual",value:"transferOut",autoComplete:"off"})," \u8f49\u51fa")),r.a.createElement("button",{style:{borderRadius:"5px",margin:"auto 5px"},className:"btn btn-primary from-group col-md-2 input-sale-frame",type:"submit",onClick:this.submitTrade},"\u78ba\u8a8d\u9001\u51fa")))}}]),a}(n.Component),z=(a(152),{acTime:"",acMoney:"",acStock:"",acSummary:"",records:[],usRecords:[],whichAccount:"Taiwan_account",isAssetTransfer:!1}),W=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).updateAccount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Taiwan_account";R.getAccount().then((function(t){"Taiwan_account"===e?(n.setState({acTime:t.accountTime,acMoney:t.accountMoney,acStock:t.accountStock,acSummary:t.summary}),R.getAccountRecord().then((function(e){n.setState({records:e})}))):n.setState({acTime:t.accountTime,acMoney:t.accountMoney,acStock:t.accountStock,acSummary:t.summary}),R.getAccountRecord().then((function(e){n.setState({usRecords:e})}))}))},n.selectAccount=function(e){S.country="Taiwan_account"===e?"tw":"us",n.setState({whichAccount:e,records:[],usRecords:[]},(function(){return n.updateAccount(e)}))},n.isAssetTransfer=function(e){return n.setState({isAssetTransfer:e})},n.state=z,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.whichAccount;this.updateAccount(e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.acTime,n=t.acMoney,o=t.acStock,c=t.acSummary,l=t.records,i=(t.usRecords,t.whichAccount),s=t.isAssetTransfer;return r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav nav-tabs",id:"nav-tab",role:"tablist"},r.a.createElement("a",{className:"nav-item nav-link active",style:{width:"100%"},id:"nav-home-tab","data-toggle":"tab",href:"#nav-home",role:"tab","aria-controls":"nav-home","aria-selected":"true",onClick:function(){return e.selectAccount("Taiwan_account")}},"\u53f0\u80a1\u8cc7\u7522"))),r.a.createElement("div",{className:"tab-content",id:"nav-tabContent"},r.a.createElement("div",{className:"tab-pane fade show active",id:"nav-home",role:"tabpanel","aria-labelledby":"nav-home-tab"},y.isMobile()&&!s&&r.a.createElement("button",{className:"btn btn-warning from-group col-md-2 input-sale-frame",type:"submit",onClick:function(){return e.isAssetTransfer(!0)}},"\u8cc7\u7522\u8f49\u79fb"),y.isMobile()&&!s&&r.a.createElement("button",{className:"btn btn-secondary from-group col-md-2 input-sale-frame",type:"submit",onClick:function(){return e.isAssetTransfer(!1)}},"\u96b1\u85cf"),s&&r.a.createElement(P,{whichAccount:i,callback:this.updateAccount}),!y.isMobile()&&r.a.createElement(P,{whichAccount:i,callback:this.updateAccount}),r.a.createElement("div",{className:"container"},r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u5275\u5efa\u6642\u9593"),r.a.createElement("th",null,"\u5e33\u6236\u91d1\u984d"),r.a.createElement("th",null,"\u80a1\u7968\u5e33\u6236"),r.a.createElement("th",null,"\u7e3d\u91d1\u984d"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,parseFloat(n).toFixed(0)),r.a.createElement("td",null,parseFloat(o).toFixed(0)),r.a.createElement("td",null,parseFloat(c).toFixed(0)))))),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"\u5e33\u6236\u91d1\u984d"),r.a.createElement("th",{scope:"col"},"\u80a1\u7968\u91d1\u984d"),r.a.createElement("th",{scope:"col"},"\u91d1\u984d(\u542b\u640d\u76ca)"),r.a.createElement("th",{scope:"col"},"\u72c0\u614b"),r.a.createElement("th",{scope:"col"},"\u6642\u9593"),r.a.createElement("th",{scope:"col"},"\u4f86\u6e90"))),r.a.createElement("tbody",null,l&&l.map((function(e,t){return r.a.createElement(v,{ket:t,record:e,index:t})})))))),r.a.createElement("div",{className:"tab-pane fade",id:"nav-profile",role:"tabpanel","aria-labelledby":"nav-profile-tab"},y.isMobile()&&!this.state.isAssetTransfer&&r.a.createElement("button",{className:"btn btn-warning from-group col-md-2 input-sale-frame",type:"submit",onClick:function(){return e.isAssetTransfer(!0)}},"\u8cc7\u7522\u8f49\u79fb"),y.isMobile()&&this.state.isAssetTransfer&&r.a.createElement("button",{className:"btn btn-secondary from-group col-md-2 input-sale-frame",type:"submit",onClick:function(){return e.isAssetTransfer(!1)}},"\u96b1\u85cf"),s&&r.a.createElement(P,{whichAccount:i,callback:this.updateAccount}),!y.isMobile()&&r.a.createElement(P,{whichAccount:i,callback:this.updateAccount}),r.a.createElement("div",{className:"container"},r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u5275\u5efa\u6642\u9593"),r.a.createElement("th",null,"\u5e33\u6236\u91d1\u984d($)"),r.a.createElement("th",null,"\u80a1\u7968\u5e33\u6236($)"),r.a.createElement("th",null,"\u7e3d\u91d1\u984d($)"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,o),r.a.createElement("td",null,c))))),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"\u5e33\u6236\u91d1\u984d"),r.a.createElement("th",{scope:"col"},"\u80a1\u7968\u91d1\u984d"),r.a.createElement("th",{scope:"col"},"\u91d1\u984d(\u542b\u640d\u76ca)"),r.a.createElement("th",{scope:"col"},"\u72c0\u614b"),r.a.createElement("th",{scope:"col"},"\u6642\u9593"),r.a.createElement("th",{scope:"col"},"\u4f86\u6e90"))),r.a.createElement("tbody",null))))))}}]),a}(n.Component),B={logOutButton:{backgroundColor:"#ef5959",color:"#ffffff",borderRadius:"5px",padding:"5px 10px",margin:"0px 5px",fontSize:"18px",":hover":{backgroundColor:"#ef0f0f"}},logOutButtonMobile:{backgroundColor:"#ef5959",color:"#ffffff",borderRadius:"5px",padding:"5px 10px",fontSize:"18px",":hover":{backgroundColor:"#ef0f0f"}},report:{display:"flex",alignItems:"center"},reportMobile:{width:"100%"},reportFormat:{display:"flex"},reportFormatMobile:{display:"flex",justifyContent:"space-between"}},Y=a(214),q=a(210),G=a(211),U=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getActiveStyle=function(){return y.isMobile()?{fontSize:"16px",marginTop:"5px",background:"rgb(232 232 232)",borderRadius:"10px"}:{fontSize:"16px",cursor:"pointer",background:"rgb(232 232 232)",borderRadius:"10px"}},e.getComputeStyleForMobile=function(){return y.isMobile()?{flexBasis:"100%",flexGrow:"1",alignItems:"center",color:"#ed2a2a",fontSize:"16px",fontWeight:"bold"}:{color:"#ed2a2a",fontSize:"18px",fontWeight:"bold"}},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.saleCost,n=t.profitAndLoss,o=t.profit,c=t.totalCost,i=t.route,s=t.changeRoute,u=t.logOutCallBack,m=t.lastYearROI,d=t.isMerge,p=y.isMobile();return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light ",style:{backgroundColor:"rgb(52 149 220)",cursor:"pointer"}},r.a.createElement("div",{className:"navbar-brand",style:"Taiwan_account"===i?Object(l.a)(Object(l.a)({},this.getActiveStyle()),{},{padding:"5px"}):{},onClick:function(e){return s("Taiwan_account")}},"\u53f0\u7063\u80a1\u7968"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarCollapse"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":".navbar-collapse.show",style:"Taiwan_history"===i?this.getActiveStyle():{}},r.a.createElement("div",{className:"nav-link",onClick:function(e){return s("Taiwan_history")}},"\u53f0\u80a1\u6b77\u53f2\u7d00\u9304 ",r.a.createElement("span",{className:"sr-only"}))),r.a.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":".navbar-collapse.show",style:"account"===i?this.getActiveStyle():{}},r.a.createElement("div",{className:"nav-link",onClick:function(e){return s("account")}},"\u6211\u7684\u5e33\u6236")),r.a.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":".navbar-collapse.show",style:"twChart"===i?this.getActiveStyle():{}},r.a.createElement("div",{className:"nav-link",onClick:function(e){return s("twChart")}},"\u640d\u76ca\u5716\u8868")),"Taiwan_account"===i&&r.a.createElement(Y.a,null,r.a.createElement(q.a,{control:r.a.createElement(G.a,{checked:d,onChange:function(){return e.props.handleMerge()},color:"warning"}),label:"\u80a1\u7968\u7d71\u6574"})),p&&r.a.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":".navbar-collapse.show",style:{marginTop:"5px"}},r.a.createElement("div",{className:"nav-link",style:B.logOutButtonMobile,onClick:function(){return u()}},"\u767b\u51fa")))),r.a.createElement("div",{style:Object(l.a)({display:"inherit"},this.getComputeStyleForMobile())},("Taiwan_history"===i||"US_account"===i)&&r.a.createElement("div",{style:p?B.reportMobile:B.report},r.a.createElement("div",{style:p?B.reportFormatMobile:B.reportFormat},r.a.createElement("div",null,"\u6295\u5165\u6210\u672c:"),r.a.createElement("div",null,a.toFixed(2),"\u5143")),r.a.createElement("div",{style:p?B.reportFormatMobile:B.reportFormat},r.a.createElement("div",null,"\u7e3d\u640d\u76ca:")," ",r.a.createElement("div",null,n.toFixed(2),"\u5143")),r.a.createElement("div",{style:p?B.reportFormatMobile:B.reportFormat},r.a.createElement("div",null,"\u6295\u5831\u7387:")," ",r.a.createElement("div",null,o,"%")),r.a.createElement("div",{style:p?B.reportFormatMobile:B.reportFormat},r.a.createElement("div",null,"\u53bb\u5e74\u6295\u5831\u7387:")," ",r.a.createElement("div",null,m,"%")))),r.a.createElement("div",{style:Object(l.a)({padding:"5px 0px"},this.getComputeStyleForMobile())},("Taiwan_account"===i||"US_account"===i)&&r.a.createElement("div",{style:p?B.reportFormatMobile:B.reportFormat},r.a.createElement("div",null,"\u76ee\u524d\u6295\u5165\u7e3d\u6210\u672c:"),r.a.createElement("div",null," ",c.toFixed(2),"\u5143"))),!p&&r.a.createElement("div",{style:B.logOutButton,onClick:function(){return u()}},"\u767b\u51fa")))}}]),a}(n.Component),Q={date:new Date,name:"",number:"",code_name:"",price:"",sheet:"",datePickerDate:new Date},V=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).inputDate=function(e){n.setState({date:e})},n.inputName=function(e){n.setState({name:e})},n.inputNumber=function(e){n.setState({number:e})},n.inputPrice=function(e){n.setState({price:e})},n.inputSheet=function(e){n.setState({sheet:e})},n.submitStock=function(e){var t=n.state,a=t.date,r=t.name,o=t.number,c=t.price,l=t.sheet;if(!(a&&r&&o)||isNaN(c)||isNaN(l))return alert("\u4e0d\u8a31\u6709\u4efb\u4f55\u4e00\u500b\u70ba\u7a7a");var i={date:a,name:r,number:o,price:c,sheet:l};R.updateAccountRecord(i,!1,e),n.props&&n.props.callback(i),n.setState({name:"",number:"",price:"",sheet:""})},n.handleChange=function(e){n.setState({date:e,datePickerDate:e})},n.state=Q,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({date:x.dateFormat(new Date),datePickerDate:x.dateFormat(new Date)})}},{key:"render",value:function(){var e=this,t=this.state.datePickerDate,a=this.props.route,n=y.isMobile();return r.a.createElement("div",{style:{margin:n?"5px 5px 0px 5px":"5px"}},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{type:"date",className:"form-control",placeholder:"\u65e5\u671f",onChange:function(t){return e.handleChange(t.target.value)},value:t})),r.a.createElement("div",{className:"from-group col-md-2 input-sale-info-frame"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u80a1\u7968\u540d\u7a31",onChange:function(t){return e.inputName(t.target.value)},value:this.state.name,autoComplete:"on"})),r.a.createElement("div",{className:"from-group col-md-2 input-sale-info-frame"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"US_account"===a?"\u7f8e\u80a1\u4ee3\u865f":"\u7de8\u865f",onChange:function(t){return e.inputNumber(t.target.value)},value:this.state.number,autoComplete:"on"})),r.a.createElement("div",{className:"from-group col-md-2 input-sale-info-frame"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u55ae\u50f9",onChange:function(t){return e.inputPrice(t.target.value)},value:this.state.price,autoComplete:"on"})),r.a.createElement("div",{className:"from-group col-md-2 input-sale-info-frame"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"US_account"===a?"\u80a1\u6578":"\u5f35\u6578",onChange:function(t){return e.inputSheet(t.target.value)},value:this.state.sheet,autoComplete:"on"})),r.a.createElement("button",{className:"btn btn-primary from-group col-md-2 input-sale-frame",type:"submit",onClick:function(){return e.submitStock(a)}},"\u78ba\u8a8d\u8cb7\u5165")))}}]),a}(n.Component),J={},H=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).updateStockStatus=function(){var e=n.props.stock,t=parseInt(n.price.value);e.sheet<n.sheet.value||isNaN(t)||!t?alert("\u8ce3\u51fa\u5f35\u6578\u932f\u8aa4"):(n.props.stockSaleCallback(n.price.value,n.sheet.value,e),n.price.value="",n.sheet.value="")},n.deleteStock=function(){var e=n.props.stock;n.props.delete(e.timestamp)},n.isFloat=function(e){return Number(e)===e&&e%1!==0},n.state=J,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.stock,n=t.saleStatus,o=t.index,c=t.route,l=t.isMerge,i=a.price*1.001425.toFixed(2),s=1e3*a.price*a.sheet*.001424<20?20:Math.round(1e3*a.price*a.sheet*.001424);return r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},o),!1===l&&!this.props.hideFiled&&r.a.createElement("td",{key:o},r.a.createElement("button",{type:"button",className:"btn btn-info","data-toggle":"modal","data-target":"#modal-".concat(o)},"\u8ce3\u51fa"),r.a.createElement("div",null,r.a.createElement("div",{className:"modal fade",id:"modal-".concat(o),tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",style:{color:"black"},id:"exampleModalLabel"},"\u8ce3\u51fa\u8cc7\u8a0a"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("h5",{style:{color:"black",textAlign:"left"},key:"price"+o,htmlFor:"price-name-".concat(o),className:"col-form-label"},"\u8ce3\u51fa\u55ae\u50f9:"),r.a.createElement("input",{type:"text",className:"form-control",id:"price-name-".concat(o),ref:function(t){e.price=t}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("h5",{style:{color:"black",textAlign:"left"},key:"sheet"+o,htmlFor:"sheet-name-".concat(o),className:"col-form-label"},"\u8ce3\u51fa\u5f35\u6578:"),r.a.createElement("input",{type:"text",className:"form-control",id:"sheet-name-".concat(o),ref:function(t){e.sheet=t}}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal","aria-label":"Close",onClick:this.updateStockStatus},"\u78ba\u8a8d",a.name))))))),"Taiwan_account"===c&&!1===l&&"sale"===a.status&&r.a.createElement("td",null,a.sale_date),"Taiwan_account"===c&&!1===l&&"unsale"===a.status&&r.a.createElement("td",null,a.date),"Taiwan_account"!==c&&!1===l&&("all"===n||"sale"===n)&&("sale"===a.status?r.a.createElement("td",null,a.sale_date):r.a.createElement("td",null)),"Taiwan_account"!==c&&!1===l&&("all"===n||"unsale"===n)&&(a.status,r.a.createElement("td",null,a.date)),r.a.createElement("td",null,a.name),r.a.createElement("td",null,a.number),r.a.createElement("td",null,l?(i/a.sheet).toFixed(2):i),r.a.createElement("td",null,this.isFloat(a.sheet)?parseFloat(a.sheet).toFixed(3):a.sheet),r.a.createElement("td",null,l?parseFloat(a.cost-1e3*i).toFixed(0):Math.floor(s)),r.a.createElement("td",null,Math.floor(a.cost)),r.a.createElement("td",null,"unsale"===a.status?"\u672a\u8ce3\u51fa":"\u5df2\u8ce3\u51fa"),r.a.createElement("td",null,Math.floor(a.sale_cost)),r.a.createElement("td",{style:{color:a.income<0?"#30ff30":"rgb(255 19 19)"}},Math.floor(a.income)),!1===l&&r.a.createElement("td",null,r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.deleteStock},"\u522a\u9664")))}}]),a}(n.Component),K=(a(154),{startStandardDate:"",endStandardDate:"",dateRegion1:"",dateRegion2:"",saleStatus:"all",stockStatus:"individual"}),$=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).queryRegion=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.state,a=t.dateRegion1,r=t.dateRegion2,o=t.saleStatus,c=t.stockStatus,l={},i=new Date,s=new Date;if(e){if("yearAgo"===e){var u=(new Date).getFullYear()-1;l={dateRegion1:x.dateFormat(new Date(u,0,1)),dateRegion2:x.dateFormat(new Date(u,11,31)),saleStatus:o,stockStatus:c}}else if("thisYear"===e){var m=(new Date).getFullYear();l={dateRegion1:x.dateFormat(new Date(m,0,1)),dateRegion2:x.dateFormat(new Date(m,11,31)),saleStatus:o,stockStatus:c}}else i.setDate(i.getDate()-e),s.setDate(s.getDate()+1),l={dateRegion1:x.dateFormat(i),dateRegion2:x.dateFormat(s),saleStatus:o,stockStatus:c};return n.props&&n.props.callback(l)}if(!(a&&r&&o&&c))return alert("\u4e0d\u8a31\u6709\u4efb\u4f55\u4e00\u500b\u70ba\u7a7a");l={dateRegion1:a,dateRegion2:r,saleStatus:o,stockStatus:c},n.props&&n.props.callback(l),n.setState({date:"",name:"",number:"",price:"",sheet:""})},n.handleStartDateChange=function(e){return n.setState({startStandardDate:e,dateRegion1:e})},n.handleEndDateChange=function(e){return n.setState({endStandardDate:e,dateRegion2:e})},n.getSaleOptions=function(e){return n.setState({saleStatus:e.target.value})},n.getStockOptions=function(e){return n.setState({stockStatus:e.target.value})},n.getStyleOfButton=function(){return y.isMobile()?{margin:"0px 0px",paddingRight:"0px",paddingLeft:"0px",whiteSpace:"nowrap"}:{margin:"3px 5px",paddingRight:"0px",paddingLeft:"0px",whiteSpace:"nowrap"}},n.state=K,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({date:x.dateFormat(new Date),dateRegion1:x.dateFormat(new Date),dateRegion2:x.dateFormat(new Date),startStandardDate:x.dateFormat(new Date),endStandardDate:x.dateFormat(new Date)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.startStandardDate,n=t.endStandardDate,o=y.isMobile();return r.a.createElement("div",null,r.a.createElement("div",{className:"form-row",style:{margin:"5px",overflowY:o?"scroll":"unset"}},r.a.createElement("button",{type:"button",className:"btn btn-info from-group col-md-2"+(o?" show-all-stock-mobile":" show-all-stock"),onClick:this.props.resetCallBack},"\u986f\u793a\u5168\u90e8 Stock "),r.a.createElement("button",{type:"button",className:"btn btn-group btn-group-toggle"+(o?" from-group col-md-6":" from-group col-md-2"),"data-toggle":"buttons",style:Object(l.a)({margin:"0px 10px",zIndex:0},this.getStyleOfButton())},r.a.createElement("label",{className:"btn btn-secondary active",onClick:this.getSaleOptions},r.a.createElement("input",{type:"radio",name:"saleOption",id:"saleOption1",value:"all",autoComplete:"off"})," \u5168\u90e8"),r.a.createElement("label",{className:"btn btn-secondary",onClick:this.getSaleOptions},r.a.createElement("input",{type:"radio",name:"saleOption",id:"saleOption2",value:"sale",autoComplete:"off"})," \u5df2\u8ce3\u51fa"),r.a.createElement("label",{className:"btn btn-secondary",onClick:this.getSaleOptions},r.a.createElement("input",{type:"radio",name:"saleOption",id:"saleOption3",value:"unsale",autoComplete:"off"})," \u672a\u8ce3\u51fa")),r.a.createElement("div",{className:"btn-group"+(o?" query-region-group-mobile":" query-region-group"),role:"group","aria-label":"Basic outlined example",style:{width:o?"inherit":"unset"}},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){return e.queryRegion(0)}},"Today"),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){return e.queryRegion(7)}},"\u524d 7 \u65e5"),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){return e.queryRegion(30)}},"\u524d 30 \u65e5"),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){return e.queryRegion(120)}},"\u524d\u4e09\u6708"),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){return e.queryRegion("yearAgo")}},"\u53bb\u5e74"),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){return e.queryRegion("thisYear")}},"\u4eca\u5e74")),r.a.createElement("div",{style:{margin:"5px",float:"left",display:"flex",alignItems:"center",width:y.isMobile()?"100%":"auto"}},r.a.createElement("div",null,"\u8d77\u59cb\u5340\u9593:"),r.a.createElement("div",{className:"col"},r.a.createElement("input",{type:"date",className:"form-control",placeholder:"\u65e5\u671f",onChange:function(t){return e.handleStartDateChange(t.target.value)},value:a}))),r.a.createElement("div",{style:{margin:"5px",float:"left",display:"flex",alignItems:"center",width:y.isMobile()?"100%":"auto"}},r.a.createElement("div",null,"\u7d50\u675f\u5340\u9593:"),r.a.createElement("div",{className:"col"},r.a.createElement("input",{type:"date",className:"form-control",placeholder:"\u65e5\u671f",onChange:function(t){return e.handleEndDateChange(t.target.value)},value:n}))),r.a.createElement("div",{className:"btn-group btn-group-toggle from-group col-md-3","data-toggle":"buttons",style:Object(l.a)({margin:"0px 10px",zIndex:0},this.getStyleOfButton())},r.a.createElement("label",{className:"btn btn-warning active",onClick:this.getStockOptions},r.a.createElement("input",{type:"radio",name:"stockOption",id:"individual",value:"individual",autoComplete:"off"})," \u500b\u5225\u80a1")),r.a.createElement("button",{className:"btn btn-primary query-region-submit "+(o?" from-group col-md-3":" from-group col-md-1 query-region-submit"),onClick:function(){return e.queryRegion("")}},"\u67e5\u8a62\u9001\u51fa")))}}]),a}(n.Component),X={allData:[],allStocks:"",isQueryOpen:!1},Z=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).queryData=function(e){return n.props.queryDataCallback(e)},n.isQueryOpen=function(e){return n.setState({isQueryOpen:e})},n.getQueryStatus=function(){return!y.isMobile()||n.state.isQueryOpen},n.state=X,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props;e&&this.setState({allStocks:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.allStocks,n=t.deleteCallback,o=t.queryDataCallback,c=t.saleStockCallback,l=t.resetCallBack,i=t.hideFiled,s=t.saleStatus,u=t.route,m=t.isMerge,d=this.state.isQueryOpen,p=y.isMobile(),f="Taiwan_history"===u;return r.a.createElement("div",null,f&&!d&&p&&r.a.createElement("button",{style:{borderRadius:"0px"},className:"btn btn-success from-group col-md-2",type:"submit",onClick:function(){return e.isQueryOpen(!0)}},"\u67e5\u8a62\u6642\u5340"),f&&d&&p&&r.a.createElement("button",{style:{borderRadius:"0px"},className:"btn btn-secondary from-group col-md-2",type:"submit",onClick:function(){return e.isQueryOpen(!1)}},"\u96b1\u85cf"),f&&this.getQueryStatus()&&r.a.createElement($,{callback:o,resetCallBack:l}),r.a.createElement("div",{style:{overflowY:y.isMobile()?"scroll":"unset"}},r.a.createElement("table",{className:"table table-dark",style:{whiteSpace:"nowrap"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),!i&&!1===m&&r.a.createElement("th",{scope:"col"},"\u8ce3\u51fa"),"all"!==s&&("sale"===s?r.a.createElement("th",{scope:"col"},"\u8ce3\u51fa\u65e5\u671f"):r.a.createElement("th",{scope:"col"},"\u8cfc\u8cb7\u65e5\u671f")),"all"===s&&"Taiwan_account"!==u&&r.a.createElement("th",{scope:"col"},"\u8ce3\u51fa\u65e5\u671f"),"all"===s&&!1===m&&r.a.createElement("th",{scope:"col"},"\u8cfc\u8cb7\u65e5\u671f"),r.a.createElement("th",{scope:"col"},"\u80a1\u7968\u540d\u7a31"),r.a.createElement("th",{scope:"col"},"\u7de8\u865f"),r.a.createElement("th",{scope:"col"},"\u5e73\u5747\u55ae\u50f9"),r.a.createElement("th",{scope:"col"},"\u5f35\u6578"),r.a.createElement("th",{scope:"col"},"\u624b\u7e8c\u8cbb"),r.a.createElement("th",{scope:"col"},"\u8cfc\u8cb7\u6210\u672c"),r.a.createElement("th",{scope:"col"},"\u72c0\u614b"),r.a.createElement("th",{scope:"col"},"\u8ce3\u51fa\u7e3d\u50f9"),r.a.createElement("th",{scope:"col"},"\u640d\u76ca"),!1===m&&r.a.createElement("th",{scope:"col"},"\u522a\u9664"))),r.a.createElement("tbody",null,0!==a.length&&a.map((function(e,t){return r.a.createElement(H,{hideFiled:i,saleStatus:s,key:e.number+t,stock:e,index:t+1,route:u,stockSaleCallback:c,delete:function(e){return n(e)},isMerge:m})}))))))}}]),a}(n.Component),ee={},te=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).updateStockStatus=function(){var e=n.props.stock,t=parseFloat(n.price.value);e.sheet<n.sheet.value||isNaN(t)||!t?alert("\u8ce3\u51fa\u5f35\u6578\u932f\u8aa4"):(n.props.stockSaleCallback(n.price.value,n.sheet.value,e),n.price.value="",n.sheet.value="")},n.deleteStock=function(){var e=n.props.stock;n.props.delete(e.timestamp)},n.state=ee,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.stock,n=t.saleStatus,o=t.index,c=a.price;return r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},o),!this.props.hideFiled&&r.a.createElement("td",{key:o},r.a.createElement("button",{type:"button",className:"btn btn-info","data-toggle":"modal","data-target":"#modal-".concat(o)},"\u8ce3\u51fa"),r.a.createElement("div",null,r.a.createElement("div",{className:"modal fade",id:"modal-".concat(o),tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",style:{color:"black"},id:"exampleModalLabel"},"\u8ce3\u51fa\u8cc7\u8a0a"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("h5",{style:{color:"black",textAlign:"left"},key:"price"+o,htmlFor:"price-name-".concat(o),className:"col-form-label"},"\u8ce3\u51fa\u55ae\u50f9:"),r.a.createElement("input",{type:"text",className:"form-control",id:"price-name-".concat(o),ref:function(t){e.price=t}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("h5",{style:{color:"black",textAlign:"left"},key:"sheet"+o,htmlFor:"sheet-name-".concat(o),className:"col-form-label"},"\u8ce3\u51fa\u5f35\u6578:"),r.a.createElement("input",{type:"text",className:"form-control",id:"sheet-name-".concat(o),ref:function(t){e.sheet=t}}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal","aria-label":"Close",onClick:this.updateStockStatus},"\u78ba\u8a8d",a.name))))))),"US_all"===n&&("sale"===a.status?r.a.createElement("td",null,a.sale_date):r.a.createElement("td",null)),"US_all"===n&&(a.status,r.a.createElement("td",null,a.date)),r.a.createElement("td",null,a.name),r.a.createElement("td",null,a.number),r.a.createElement("td",null,c),r.a.createElement("td",null,a.sheet),r.a.createElement("td",null,a.cost),r.a.createElement("td",null,"unsale"===a.status?"\u672a\u8ce3\u51fa":"\u5df2\u8ce3\u51fa"),r.a.createElement("td",null,a.sale_cost),r.a.createElement("td",{style:{color:a.income<0?"#30ff30":"rgb(255 19 19)"}},a.income),r.a.createElement("td",null,r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.deleteStock},"\u522a\u9664")))}}]),a}(n.Component),ae={allData:[],allStocks:"",isQueryOpen:!1},ne=(n.Component,a(123)),re={wrapper:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",width:"100%",minHeight:"100%",padding:"20px",position:"absolute",backgroundColor:"rgba(0,0,0,0.7)"},frameContent:{WebkitBorderRadius:"10px 10px 10px 10px",borderRadius:"10px 10px 10px 10px",background:"#fff",padding:"0px",width:"90%",maxWidth:"450px",position:"fixed",WebkitBoxShadow:"0 30px 60px 0 rgba(0,0,0,0.3)",boxShadow:"0 30px 60px 0 rgba(0,0,0,0.3)",textAlign:"center",border:"5px solid #2196f3",top:"25%"},logIn:{width:"75px",height:"75px",backgroundSize:"100%",margin:"15px auto",borderRadius:"50px",backgroundColor:"rgb(0 127 185 / 50%)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:"aliceblue",cursor:"pointer",":hover":{backgroundColor:"rgb(0 127 185 / 25%)"}},register:{width:"75px",height:"75px",backgroundSize:"100%",margin:"15px auto",borderRadius:"50px",backgroundColor:"rgb(232 88 78)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:"aliceblue",cursor:"pointer",":hover":{backgroundColor:"rgb(232 88 78 / 25%)"}},logo:{width:"75px",height:"75px",backgroundSize:"100%",margin:"15px auto"},inputContent:{textAlign:"center",textDecoration:"none",display:"inline-block",fontSize:"16px",margin:"5px",width:"93%",padding:"10px 20px"},input:{backgroundColor:"#f6f6f6",color:"#0d0d0d",padding:"10px 32px",textDecoration:"none",display:"inline-block",fontSize:"16px",margin:"5px",width:"93%",border:"2px solid #f6f6f6"},submit:{backgroundColor:"#000000",border:"none",color:"white",padding:"15px 20px",textAlign:"center",textDecoration:"none",display:"inline-block",textTransform:"uppercase",fontSize:"13px",opacity:.5,margin:"20px",width:"50%",":hover":{opacity:1,backgroundColor:"#000000",boxShadow:"#00000"}},back:{backgroundColor:"#ff990e",border:"none",color:"white",padding:"15px 20px",textAlign:"center",textDecoration:"none",display:"inline-block",textTransform:"uppercase",fontSize:"13px",opacity:.5,margin:"20px",width:"50%",":hover":{opacity:1,backgroundColor:"#ff990e",boxShadow:"#00000"}},forgetPWD:{marginBottom:"20px"}},oe={email:"",resetEmail:"",password:"",isLogIn:!0,error:!1,message:"",isOpenForgetPWD:!1},ce=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).loginSubmitWithKeydown=function(){return a.getStatusMethod()},a.getStatusMethod=function(){return a.actionForSubmit(a.state.email,a.state.password)},a.logInSelect=function(e){return a.setState({isOpenForgetPWD:!1,isLogIn:e})},a.actionForSubmit=function(){var e=a.state,t=e.email,n=e.password,r=e.isLogIn,o=Object(u.a)(a);switch(r){case!0:return o.logInSubmit(t,n);case!1:return o.registerSubmit(t,n)}},a.logInSubmit=function(e,t){var n=a.props,r=n.logInCallBack,o=n.homePageCallBack;if(!e&&!t)return a.setState({error:!0,message:"Please input email&password"}),void setTimeout((function(){return a.setState({error:!1,message:""})}),5e3);w.auth().signInWithEmailAndPassword(e,t).then((function(e){var t=w.auth().currentUser;t&&(localStorage.setItem("account-stock",t.uid),console.log("log in successfully"),S.user_id=t.uid,r&&r(t.uid),o&&o())})).catch((function(e){window.alert(e.message.toString()),a.setState({error:!0,message:e.message}),setTimeout((function(){return a.setState({error:!1,message:""})}),5e3)}))},a.registerSubmit=function(e,t){var n=a.props,r=n.logInCallBack,o=n.homePageCallBack;if(!e&&!t)return a.setState({error:!0,message:"Please input email&password"}),void setTimeout((function(){return a.setState({error:!1,message:""})}),5e3);var c={email:e,pwd:t};w.auth().createUserWithEmailAndPassword(c.email,c.pwd).then((function(e){S.user_id=e.user.uid,w.database().ref("/account_data/".concat(e.user.uid)).set({tw:{account_summary:{accountMoney:0,accountStock:0,accountTime:x.dateFormat(new Date),summary:0},account_record:{},stock_info:{}},us:{account_summary:{accountMoney:0,accountStock:0,accountTime:x.dateFormat(new Date),summary:0},account_record:{},stock_info:{}}}).then((function(){localStorage.setItem("account-sstock",e.user.uid),console.log("register successfully"),r&&r(e.user.uid),o&&o()}))})).catch((function(e){a.setState({exist:!0,error:!0,message:e.message.toString()}),window.alert(e.message.toString()),console.log("register failed")}))},a.setEmail=function(e){return a.setState({email:e})},a.setPassword=function(e){return a.setState({password:e})},a.openForgetPWD=function(){return a.setState({isOpenForgetPWD:!0})},a.closeForgetPWD=function(){return a.setState({isOpenForgetPWD:!1})},a.resetPWD=function(){var e=a.state.resetEmail,t=Object(u.a)(a);w.auth().sendPasswordResetEmail(e).then((function(){window.alert("\u5df2\u767c\u9001\u4fe1\u4ef6\u81f3\u4fe1\u7bb1\uff0c\u8acb\u6309\u7167\u4fe1\u4ef6\u8aaa\u660e\u91cd\u8a2d\u5bc6\u78bc"),t.closeForgetPWD()})).catch((function(e){window.alert(e.message)}))},a.setResetEmail=function(e){return a.setState({resetEmail:e})},a.state=oe,a}return Object(s.a)(n,[{key:"componentWillUnmount",value:function(){window.document.removeEventListener("keydown",function(e){13===e.keyCode&&this.loginSubmitWithKeydown()}.bind(this))}},{key:"componentDidMount",value:function(){window.document.addEventListener("keydown",function(e){13===e.keyCode&&this.loginSubmitWithKeydown()}.bind(this))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLogIn,o=t.isOpenForgetPWD,c=y.isMobile();return r.a.createElement("div",{style:re.wrapper},r.a.createElement("div",{className:"fadeInDown",style:{width:c?"80%":"40%",display:"flex",position:"fixed",top:"5%"}},r.a.createElement("div",{key:"logIn",style:Object(l.a)(Object(l.a)({},re.logIn),{},{border:n?"3px solid white":""}),onClick:function(){return e.logInSelect(!0)}},"\u767b\u5165"),r.a.createElement("div",{key:"register",style:Object(l.a)(Object(l.a)({},re.register),{},{border:n?"":"3px solid white"}),onClick:function(){return e.logInSelect(!1)}},"\u8a3b\u518a")),r.a.createElement("div",{className:"fadeInDown",style:Object(l.a)(Object(l.a)({},re.frameContent),{},{border:n?"5px solid #2196f3":"5px solid rgb(232 88 78)"})},!o&&r.a.createElement("div",null,r.a.createElement("div",{className:"fadeIn first"},r.a.createElement("div",{style:Object(l.a)(Object(l.a)({},re.logo),{},{backgroundImage:"url("+a(155)+")"})})),r.a.createElement("div",{style:Object(l.a)({},re.inputContent)},r.a.createElement("input",{type:"text",style:re.input,id:"email",onChange:function(t){return e.setEmail(t.target.value)},className:"fadeIn second",name:"login",placeholder:"email"}),r.a.createElement("input",{type:"password",style:re.input,id:"password",onChange:function(t){return e.setPassword(t.target.value)},className:"fadeIn third",name:"login",placeholder:"password"})),r.a.createElement("input",{style:Object(l.a)({},re.submit),type:"submit",className:"fadeIn fourth",value:n?"Log In":"Register",onClick:this.actionForSubmit}),n&&r.a.createElement("div",{id:"formFooter",style:re.forgetPWD},r.a.createElement("a",{className:"underlineHover",href:"#",onClick:this.openForgetPWD},"Forgot Password?"))),o&&r.a.createElement("div",{style:Object(l.a)({},re.inputContent)},r.a.createElement("input",{type:"text",style:re.input,id:"email",onChange:function(t){return e.setResetEmail(t.target.value)},className:"fadeIn second",name:"login",placeholder:"email"}),r.a.createElement("input",{key:"backToLogIn",style:Object(l.a)(Object(l.a)({},re.back),{},{margin:"5px",width:"45%"}),onClick:this.closeForgetPWD,type:"button",className:"fadeIn fourth",value:"back"}),r.a.createElement("input",{style:Object(l.a)(Object(l.a)({},re.submit),{},{margin:"5px",width:"45%"}),type:"submit",className:"fadeIn fourth",value:"submit to mail",onClick:this.resetPWD}))))}}]),n}(n.Component),le=Object(ne.a)(ce),ie=a(13),se=a(25),ue=a(46),me=a.n(ue),de=a(213),pe=a(43),fe=a.n(pe),he=a(52),ge=a.n(he),be=Object(p.a)("div")(N||(N=Object(se.a)(["\n  display: flex;\n"]))),ve=Object(p.a)("div")(_||(_=Object(se.a)(["\n  margin:0px 5%;\n  width: 50%;\n  text-align: left;\n  font-size: 20px;\n  color: #6495ED;\t\n"]))),ye=Object(p.a)("span")(j||(j=Object(se.a)(["\n  text-align: left;\n  font-size: 20px;\n  color: #FF0000;\t\n"]))),Ee=function(e){var t=e.chartInfo,a=void 0===t?{}:t,o=(e.type,e.dividend),c=Object(n.useState)([]),l=Object(ie.a)(c,2),i=l[0],s=l[1],u=n.useRef<ge.a.RefObject>null,m={chart:{height:"70%",type:"column"},title:{text:"\u5e74\u640d\u76ca\u5716\u8868"},xAxis:{categories:a.yearCategories,lineWidth:1},yAxis:[{lineWidth:1,labels:{format:"{value} \u5143",style:{color:fe.a.getOptions().colors[1]}},title:{text:"\u53f0\u5e63",style:{color:fe.a.getOptions().colors[1]}}}],series:[{name:"\u640d\u76ca",type:"column",data:a.yearValue,tooltip:{valueSuffix:" \u5143"}},{name:"\u80a1\u5229",type:"column",data:i,tooltip:{valueSuffix:" \u5143"}}]};return Object(n.useEffect)((function(){if("{}"!==JSON.stringify(a)){var e=[];a.yearCategories.map((function(t){e.push(o[t]?o[t].reduce((function(e,t){return e+=Number(t.transfer)}),0):0)})),s(e)}}),[a]),r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement(be,null,r.a.createElement(ve,null,"\u7e3d\u640d\u76ca: ",r.a.createElement(ye,null,0!==Object.keys(a).length&&a.yearValue.reduce((function(e,t){return e+t.y}),0)))),r.a.createElement(ge.a,{highcharts:fe.a,options:m,usRef:u}))},we=a(15),ke=a(207),xe=a(209),Se=Object(p.a)("div")(F||(F=Object(se.a)(["\n  display: flex;\n"]))),Oe=Object(p.a)("div")(D||(D=Object(se.a)(["\n  display: flex;\n  flex-basis: 30%;\n  margin: 0px 5%;\n  text-align: left;\n  font-size: 20px;\n  color: #6495ed;\n"]))),Ce=Object(p.a)("span")(M||(M=Object(se.a)(["\n  text-align: left;\n  font-size: 20px;\n  color: #ff0000;\n"]))),Ne=Object(p.a)("div")(I||(I=Object(se.a)(["\n  display: flex;\n  flex-grow: 1;\n"]))),_e=Object(p.a)("div")(A||(A=Object(se.a)(['\n  display: flex;\n  align-self: center;\n  font-size: 20px;\n  color: #6495ed;\n  &:after {\n    content: "\xa0\xa0";\n  }\n'],['\n  display: flex;\n  align-self: center;\n  font-size: 20px;\n  color: #6495ed;\n  &:after {\n    content: "\\xa0\\xa0";\n  }\n']))),je=function(e){var t=e.chartInfo,a=(e.type,e.dividend,Object(n.useState)("all")),o=Object(ie.a)(a,2),c=o[0],l=o[1],i=Object(n.useState)([{value:"all",label:"all"}]),s=Object(ie.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)({value:[],rate:[],date:[]}),p=Object(ie.a)(d,2),f=p[0],h=p[1],g=n.useRef<ge.a.RefObject>null;Object(n.useEffect)((function(){"{}"!==JSON.stringify(t)&&h("all"!==c?{value:t.monthValue.filter((function(e){return new RegExp("".concat(c)).test(e.date)&&e})),rate:t.monthRate.filter((function(e){return new RegExp("".concat(c)).test(e.date)&&e})),date:t.categories.filter((function(e){return new RegExp("".concat(c)).test(e)&&e}))}:{value:t.monthValue,rate:t.monthRate,date:t.categories})}),[c]),Object(n.useEffect)((function(){h({value:t.monthValue,rate:t.monthRate,date:t.categories})}),[]),Object(n.useEffect)((function(){if("{}"!==JSON.stringify(t)){var e=t.yearCategories&&t.yearCategories.map((function(e){return{value:e,label:e}}));m(e?u.concat(e):u),h({value:t.monthValue,rate:t.monthRate,date:t.categories})}}),[t]);var b={chart:{height:"70%",type:"column",alignTicks:!0},title:{text:"\u6708\u640d\u76ca\u5716\u8868"},xAxis:[{type:"category",categories:f.date},{type:"category",categories:f.date,linkedTo:0,labels:{enabled:!1},offset:0}],yAxis:[{softMax:f.value?Math.max.apply(Math,Object(we.a)(f.value.map((function(e){return e.y})))):0,softMin:f.value?Math.min.apply(Math,Object(we.a)(f.value.map((function(e){return e.y})))):0,lineWidth:1,gridLineWidth:3,labels:{format:"{value} \u5143",style:{color:fe.a.getOptions().colors[1]}},title:{text:"\u53f0\u5e63",style:{color:fe.a.getOptions().colors[1]}},opposite:!1}],series:[{name:"\u640d\u76ca",data:f.value,tooltip:{valueSuffix:" \u5143"}}]};return r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement(Se,null,r.a.createElement(Oe,null,"\u7e3d\u640d\u76ca: ",r.a.createElement(Ce,null,function(){if(f.value&&0!==f.value.length)return f.value.reduce((function(e,t){return e+t.y}),0)}())),r.a.createElement(Ne,null,r.a.createElement(_e,null,"\u9078\u64c7\u5e74\u4efd:"),r.a.createElement(ke.a,{id:"outlined-select-year",select:!0,value:c,onChange:function(e){l(e.target.value)},sx:{height:"30px",width:"75%","& .MuiOutlinedInput-root":{height:"30px"}}},u.map((function(e){return r.a.createElement(xe.a,{key:e.value,value:e.value},e.label)}))))),r.a.createElement(ge.a,{highcharts:fe.a,options:b,usRef:g}))};function Fe(){Fe=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function i(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),c=new x(n||[]);return o._invoke=function(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return O()}for(a.method=r,a.arg=o;;){var c=a.delegate;if(c){var l=E(c,a);if(l){if(l===u)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=s(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===u)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}(e,a,c),o}function s(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=i;var u={};function m(){}function d(){}function p(){}var f={};l(f,r,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(S([])));g&&g!==t&&a.call(g,r)&&(f=g);var b=p.prototype=m.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var n;this._invoke=function(r,o){function c(){return new t((function(n,c){!function n(r,o,c,l){var i=s(e[r],e,o);if("throw"!==i.type){var u=i.arg,m=u.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,l)}),(function(e){n("throw",e,c,l)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,l)}))}l(i.arg)}(r,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function S(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=p,l(b,"constructor",p),l(p,"constructor",d),d.displayName=l(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(y.prototype),l(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var c=new y(i(t,a,n,r),o);return e.isGeneratorFunction(a)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},v(b),l(b,c,"Generator"),l(b,r,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=S,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=a.call(o,"catchLoc"),i=a.call(o,"finallyLoc");if(l&&i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),k(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;k(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:S(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},e}Object(p.a)("div")(L||(L=Object(se.a)(["\n  display: flex;\n"])));var De=function(e){var t=e.allStocks,a=void 0===t?[]:t,o=(e.route,Object(n.useState)({})),c=Object(ie.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)(null),m=Object(ie.a)(u,2),d=m[0],p=m[1];return Object(n.useEffect)((function(){if(0!==a.length){var e=a.filter((function(e){return 0!==e.income})).map((function(e){return Object(l.a)(Object(l.a)({},e),{},{sale_date:e.sale_date.substr(0,7)})})),t=function(e){for(var t=e[e.length-1].date.substring(0,4),a=e[e.length-1].date.substring(5,7),n=(new Date).getFullYear(),r=(new Date).getMonth()+1,o=[],c=t;c<=n;c++)for(var l=c===t?a:1;l<=(c===n?r:12);l++)l.toString().length<=1&&0!==l?o.push("".concat(c,"-0").concat(l)):o.push("".concat(c,"-").concat(l));return o=o.slice(11)}(a),n=function(e,t){var a=[],n=[],r=0;return e.map((function(e){var o=0,c=0;t.forEach((function(t){t.sale_date===e&&(o+=t.income,c+=t.cost)})),r=0===o||0===c?0:Math.round(o/c*100),a.push({y:o,date:e,color:o>0?"#32a852":"#ff0000"}),n.push({y:r,date:e,color:r>0?"#0e6124":"#8E0011"})})),[a,n]}(t,e),r=function(e){for(var t=e[e.length-1].date.substring(0,4),a=(new Date).getFullYear(),n=[],r=t;r<=a;r++)n.push("".concat(r));return n}(a),o=function(e,t){var a=[];return e.map((function(e){var n=0;t.forEach((function(t){t.sale_date.substr(0,4)===e&&(n+=t.income)})),a.push({y:n,color:n>0?"#32a852":"#ff0000"})})),a}(r,e);return s({categories:t,monthValue:n[0],monthRate:n[1],yearCategories:r,yearValue:o}),function(){a=[]}}}),[a]),Object(n.useEffect)((function(){var e={},t=function(e){return/\u80a1\u5229/.test(e.source)};(function(){var e=Object(E.a)(Fe().mark((function e(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.getAccountRecord();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(a){a.map((function(a){!e[a.transferTime.substring(0,4)]&&t(a)?(e[a.transferTime.substr(0,4)]=[],e[a.transferTime.substr(0,4)].push(a)):t(a)&&e[a.transferTime.substr(0,4)].push(a)})),p(e)}))}),[]),r.a.createElement(de.a,{container:!0},r.a.createElement(de.a,{item:!0,xs:12,md:6},r.a.createElement(je,{chartInfo:i,type:"year"})),r.a.createElement(de.a,{item:!0,xs:12,md:6},r.a.createElement(Ee,{chartInfo:i,type:"year",dividend:d})))},Me={inputData:[],unSaleStocks:[],saleStocks:[],allStocks:[],showStocks:[],totalCost:0,route:"Taiwan_account",profitAndLoss:0,profit:0,saleCost:0,saleIsOpen:!1,saleStatus:"all",lastYearROI:0,logInStatus:!1,loading:!1,isMerge:!1},Ie=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).updateAllData=function(){var e=a.state.route;S.route=e,R.getAllData().then((function(e){S.country="tw",a.setState({lastYearROI:e.lastYearROI,saleStatus:"all",showStocks:e.showStocks,allStocks:e.allStocks,saleStocks:e.saleStocks,unSaleStocks:e.unSaleStocks,totalCost:e.totalCost,profitAndLoss:e.profitAndLoss,saleCost:e.saleCost,profit:(e.profitAndLoss/e.saleCost*100).toFixed(2),loading:!1})}))},a.inputData=function(e){var t=Object(u.a)(a),n=a.state.route;R.insertNewData(e,n).then((function(){t.updateAllData()}))},a.deleteStock=function(e){R.deleteStock(e).then((function(){return a.updateAllData()}))},a.saleStock=function(e,t,n){var r=a.state.route;R.updateStock(e,t,n,r).then((function(){var o={price:e,sheet:t,cost:n.cost,date:n.date};R.updateAccountRecord(o,!0,r),a.updateAllData()}))},a.loginRecord=function(){var e=localStorage.getItem("account-stock");e&&(S.user_id=e,a.closeLoginPage(),a.updateAllData())},a.logOut=function(){localStorage.removeItem("account-sstock"),a.setState({logInStatus:!1})},a.changeRoute=function(e){switch(e){case"twChart":case"Taiwan_history":case"Taiwan_account":S.country="tw"}a.setState({route:e,showStocks:[]},(function(){return a.updateAllData()}))},a.infoMerge=function(e){return e.reduce((function(e,t,a){if(e&&0===e.filter((function(e){return me.a.trim(e.number)===me.a.trim(t.number)})).length)e.push({cost:t.cost,income:0,name:t.name,number:t.number,price:Number(t.price)*Number(t.sheet),sale_cost:0,sale_date:0,sale_price:0,sale_sheet:0,sheet:Number(t.sheet),status:"unsale"});else{var n=me.a.findIndex(e,(function(e){return me.a.trim(e.number)===me.a.trim(t.number)}),0);e[n]=Object(l.a)(Object(l.a)({},e[n]),{},{cost:Math.round(Number(e[n].cost)+Number(t.cost),2),price:Number(e[n].price)+Number(t.price)*Number(t.sheet),sheet:Number(e[n].sheet)+Number(t.sheet)})}return e}),[])},a.updateQueryData=function(e){var t=a.state,n=t.allStocks,r=t.unSaleStocks,o=t.saleStocks,c=e.dateRegion1,l=e.dateRegion2,i=0,s=0,u=0,m="";if(a.setState({saleStatus:e.saleStatus}),"individual"===e.stockStatus){switch(e.saleStatus){case"all":m=n.filter((function(e){return c<=e.sale_date&&e.sale_date<=l}));break;case"sale":m=o.filter((function(e){return c<=e.sale_date&&e.sale_date<=l}));break;case"unsale":m=r.filter((function(e){return c<=e.date&&e.date<=l}))}for(var d in m)u+=m[d].income,s+=m[d].cost;i=(u/s*100).toFixed(2),a.setState({showStocks:m,profit:i,saleCost:s,profitAndLoss:u})}else e.stockStatus},a.reset=function(){return a.updateAllData()},a.saleIsOpen=function(){return a.setState({saleIsOpen:!a.state.saleIsOpen})},a.getSaleIsStatus=function(){return!y.isMobile()||a.state.saleIsOpen},a.handleMerge=function(){return a.setState({isMerge:!a.state.isMerge})},a.closeLoginPage=function(){return a.setState({logInStatus:!0,loading:!0})},a.state=Me,a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.loginRecord(),this.state.logInStatus&&this.updateAllData()}},{key:"render",value:function(){var e=this,t=this.state.inputData,n=this.state.unSaleStocks,o=this.state.showStocks,c=this.state,l=c.route,i=c.logInStatus,s=c.lastYearROI,u=c.loading,m=c.isMerge,d=m?this.infoMerge(n):n;return i?r.a.createElement("div",{className:"App",style:{height:window.innerHeight,margin:"0 auto"}},!0===u&&r.a.createElement("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:"100%",display:"block",zIndex:7,backgroundColor:"rgba(0, 0, 0, 0.5)"}},r.a.createElement("img",{alt:"",style:{display:"flex",width:"128px",height:"128px",position:"relative",margin:"0px auto",backgroundSize:"100%",top:"calc(50% - 50px)"},src:a(166)})),r.a.createElement(U,{lastYearROI:s,totalCost:this.state.totalCost,profitAndLoss:this.state.profitAndLoss,route:l,changeRoute:this.changeRoute,profit:this.state.profit,logOutCallBack:this.logOut,saleCost:this.state.saleCost,handleMerge:this.handleMerge,isMerge:m}),y.isMobile()&&!this.state.saleIsOpen&&("Taiwan_account"===l||"US_account"===l)&&r.a.createElement("button",{className:"btn btn-warning from-group col-md-2 input-sale-frame",type:"submit",onClick:function(){return e.saleIsOpen(!0)}},"\u8cb7\u5165"),y.isMobile()&&this.state.saleIsOpen&&("Taiwan_account"===l||"US_account"===l)&&r.a.createElement("button",{className:"btn btn-secondary from-group col-md-2 input-sale-frame",type:"submit",onClick:function(){return e.saleIsOpen(!1)}},"\u96b1\u85cf"),this.getSaleIsStatus()&&("Taiwan_account"===l||"US_account"===l)&&r.a.createElement(V,{callback:this.inputData,route:l}),"Taiwan_account"===l&&r.a.createElement(Z,{hideFiled:!1,saleStatus:this.state.saleStatus,inputData:t,allStocks:d,deleteCallback:this.deleteStock,saleStockCallback:this.saleStock,route:l,isMerge:m}),"twChart"===l&&r.a.createElement(De,{hideFiled:!1,allStocks:o,route:l}),"Taiwan_history"===l&&r.a.createElement(Z,{hideFiled:!0,saleStatus:this.state.saleStatus,inputData:t,allStocks:o,deleteCallback:this.deleteStock,saleStockCallback:this.saleStock,route:l,queryDataCallback:this.updateQueryData,resetCallBack:this.reset,isMerge:!1}),"account"===l&&r.a.createElement(W,{route:l})):r.a.createElement("div",null,r.a.createElement(le,{logInCallBack:function(){return e.updateAllData()},homePageCallBack:this.closeLoginPage}))}}]),n}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,a){}},[[134,1,2]]]);
//# sourceMappingURL=main.b46d8b4c.chunk.js.map