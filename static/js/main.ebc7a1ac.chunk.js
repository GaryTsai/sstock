(this.webpackJsonpsstock=this.webpackJsonpsstock||[]).push([[0],{17:function(e,t,a){},23:function(e,t,a){e.exports=a(41)},28:function(e,t,a){},32:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(20),r=a.n(s),l=(a(17),a(3)),i=a(4),c=a(14),u=a(6),m=a(5),p=(a(28),a(29),a(30),a(7)),d={isMobile:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(e.substr(0,4)))&&(t=!0),/\(macintosh; intel mac os x 10_15\)/i.test(e)&&(t=!0),t}},h={active:"all"},f=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getActiveStyle=function(){return d.isMobile()&&"summary"===n.props.route?{marginTop:"5px",background:"rgb(232 232 232)"}:"summary"===n.props.route?{cursor:"pointer",background:"rgb(232 232 232)",borderRadius:"10px"}:void 0},n.getComputeStyleForMobile=function(){return d.isMobile()?{flexBasis:"100%",flexGrow:"1",alignItems:"center",color:"#ed2a2a"}:{color:"#ed2a2a"}},n.state=h,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return console.log(this.props.totalCost,this.props.profitAndLoss,this.props.profit,this.props.saleCost),o.a.createElement("div",null,o.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light ",style:{backgroundColor:"rgb(52 149 220)",cursor:"pointer"}},o.a.createElement("a",{className:"navbar-brand",onClick:function(t){return e.props.changeRoute("home")}},"Freedom of wealth"),o.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"},o.a.createElement("span",{className:"navbar-toggler-icon"})),o.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarCollapse"},o.a.createElement("ul",{className:"navbar-nav mr-auto"},o.a.createElement("li",{className:"nav-item",style:Object(p.a)({},this.getActiveStyle())},o.a.createElement("a",{className:"nav-link",onClick:function(t){return e.props.changeRoute("summary")}},"\u6b77\u53f2\u7d00\u9304 ",o.a.createElement("span",{className:"sr-only"}))),o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:"nav-link"},"Yor Money")))),o.a.createElement("div",{style:{display:"inherit"}},"summary"===this.props.route&&o.a.createElement("div",{style:Object(p.a)({fontSize:"18px",fontWeight:"bold"},this.getComputeStyleForMobile())},"\u6295\u5165\u6210\u672c:",this.props.saleCost,"\u5143"),"summary"===this.props.route&&o.a.createElement("div",{style:Object(p.a)({fontSize:"18px",fontWeight:"bold"},this.getComputeStyleForMobile())},"\u7e3d\u640d\u76ca: ",this.props.profitAndLoss,"\u5143"),"summary"===this.props.route&&o.a.createElement("div",{style:Object(p.a)({fontSize:"18px",fontWeight:"bold"},this.getComputeStyleForMobile())},"\u6295\u6b96\u5229\u7387: ",this.props.profit,"%"),"home"===this.props.route&&o.a.createElement("div",{style:Object(p.a)({width:"100%",fontSize:"18px",fontWeight:"bold"},this.getComputeStyleForMobile())},"\u7e3d\u6210\u672c: ",this.props.totalCost,"\u5143"))))}}]),a}(n.Component),b=[31,28,31,30,31,30,31,31,30,31,30,31],g={dateFormat:function(e){var t=e.getFullYear(),a=("0"+(e.getMonth()+1)).slice(-2),n=("0"+(new Date).getDate()).slice(-2);return console.log(t+"-"+a+"-"+n),t+"-"+a+"-"+n},toDualDigit:function(e){return e<10?"0"+e:e},days:function(e,t){return console.log(e,t),(e%4===0&&e%100!==0||e%400===0)&&2===t?29:b[t]}},v=(a(18),{date:new Date,name:"",number:"",price:"",sheet:"",datePickerDate:new Date}),k=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).inputDate=function(e){n.setState({date:e})},n.inputName=function(e){n.setState({name:e})},n.inputNumber=function(e){n.setState({number:e})},n.inputPrice=function(e){n.setState({price:e})},n.inputSheet=function(e){n.setState({sheet:e})},n.submitStock=function(){var e=n.state,t=e.date,a=e.name,o=e.number,s=e.price,r=e.sheet;if(!(t&&a&&o)||isNaN(s)||isNaN(r))return alert("\u4e0d\u8a31\u6709\u4efb\u4f55\u4e00\u500b\u70ba\u7a7a");var l={date:t,name:a,number:o,price:s,sheet:r};n.props&&n.props.callback(l),n.setState({date:"",name:"",number:"",price:"",sheet:""})},n.getFormatDate=function(e){return e.getFullYear()+"-"+g.toDualDigit(e.getMonth()+1)+"-"+g.toDualDigit(e.getDate())},n.handleChange=function(e){n.setState({date:n.getFormatDate(e),datePickerDate:n.getFormatDate(e)})},n.state=v,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({date:this.getFormatDate(new Date),datePickerDate:this.getFormatDate(new Date)})}},{key:"render",value:function(){var e=this,t=this.state.datePickerDate;return o.a.createElement("div",{style:{margin:"5px 5px"}},o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"col"},o.a.createElement("input",{type:"date",className:"form-control",placeholder:"\u65e5\u671f",onChange:function(t){return e.handleChange(t.target.value)},value:t})),o.a.createElement("div",{className:"from-group col-md-2 input-sale-frame"},o.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u80a1\u7968\u540d\u7a31",onChange:function(t){return e.inputName(t.target.value)},value:this.state.name})),o.a.createElement("div",{className:"from-group col-md-2 input-sale-frame"},o.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u7de8\u865f",onChange:function(t){return e.inputNumber(t.target.value)},value:this.state.number})),o.a.createElement("div",{className:"from-group col-md-2 input-sale-frame"},o.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u55ae\u50f9",onChange:function(t){return e.inputPrice(t.target.value)},value:this.state.price})),o.a.createElement("div",{className:"from-group col-md-2 input-sale-frame"},o.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u5f35\u6578",onChange:function(t){return e.inputSheet(t.target.value)},value:this.state.sheet})),o.a.createElement("button",{className:"btn btn-primary from-group col-md-2 input-sale-frame",type:"submit",onClick:this.submitStock},"\u78ba\u8a8d\u9001\u51fa")))}}]),a}(n.Component),S={},y=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).updateStockStatus=function(){var e=n.props.stock,t=n.price.value;e.sheet<n.sheet.value||isNaN(t)||!t?alert("\u8ce3\u51fa\u5f35\u6578\u932f\u8aa4"):(n.props.stockSaleCallback(n.price.value,n.sheet.value,e),n.price.value="",n.sheet.value="")},n.deleteStock=function(){var e=n.props.stock;n.props.delete(e.timestamp)},n.state=S,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.stock,n=t.index,s=(1.001425*a.price).toFixed(3),r=1e3*a.price*a.sheet*.001424<20?20:Math.round(1e3*a.price*a.sheet*.001424);return o.a.createElement("tr",null,o.a.createElement("th",{scope:"row"},n),!this.props.hideFiled&&o.a.createElement("td",{key:n},o.a.createElement("button",{type:"button",className:"btn btn-info","data-toggle":"modal","data-target":"#modal-".concat(n)},"\u8ce3\u51fa"),o.a.createElement("div",null,o.a.createElement("div",{className:"modal fade",id:"modal-".concat(n),tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},o.a.createElement("div",{className:"modal-dialog",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title",style:{color:"black"},id:"exampleModalLabel"},"\u8ce3\u51fa\u8cc7\u8a0a"),o.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement("div",{className:"modal-body"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{key:"price"+n,htmlFor:"price-name-".concat(n),className:"col-form-label"},"\u8ce3\u51fa\u55ae\u50f9:"),o.a.createElement("input",{type:"text",className:"form-control",id:"price-name-".concat(n),ref:function(t){e.price=t}})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{key:"sheet"+n,htmlFor:"sheet-name-".concat(n),className:"col-form-label"},"\u8ce3\u51fa\u5f35\u6578:"),o.a.createElement("input",{type:"text",className:"form-control",id:"sheet-name-".concat(n),ref:function(t){e.sheet=t}}))),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal","aria-label":"Close",onClick:this.updateStockStatus},"\u78ba\u8a8d",a.name))))))),"sale"!==this.props.saleStatus?o.a.createElement("td",null,a.date):o.a.createElement("td",null,a.sale_date),o.a.createElement("td",null,a.name),o.a.createElement("td",null,a.number),o.a.createElement("td",null,s),o.a.createElement("td",null,a.sheet),o.a.createElement("td",null,r.toFixed(0)),o.a.createElement("td",null,a.cost.toFixed(0)),o.a.createElement("td",null,"unsale"===a.status?"\u672a\u8ce3\u51fa":"\u5df2\u8ce3\u51fa"),o.a.createElement("td",null,a.sale_cost.toFixed(2)),o.a.createElement("td",{style:{color:a.income<0?"#30ff30":"rgb(255 19 19)"}},a.income.toFixed(2)),o.a.createElement("td",null,o.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.deleteStock},"\u522a\u9664")))}}]),a}(n.Component),E=(a(32),{startStandardDate:"",endStandardDate:"",dateRegion1:"",dateRegion2:"",saleStatus:"all",stockStatus:"individual"}),D=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getFormatDate=function(e){return e.getFullYear()+"-"+g.toDualDigit(e.getMonth()+1)+"-"+g.toDualDigit(e.getDate())},n.queryRegion=function(){var e=n.state,t=e.dateRegion1,a=e.dateRegion2,o=e.saleStatus,s=e.stockStatus;if(console.log(t,a,o,s),!(t&&a&&o&&s))return alert("\u4e0d\u8a31\u6709\u4efb\u4f55\u4e00\u500b\u70ba\u7a7a");var r={dateRegion1:t,dateRegion2:a,saleStatus:o,stockStatus:s};n.props&&n.props.callback(r),n.setState({date:"",name:"",number:"",price:"",sheet:""})},n.handleStartDateChange=function(e){return n.setState({startStandardDate:e,dateRegion1:e})},n.handleEndDateChange=function(e){return n.setState({endStandardDate:e,dateRegion2:e})},n.getSaleOptions=function(e){return n.setState({saleStatus:e.target.value})},n.getStockOptions=function(e){return n.setState({stockStatus:e.target.value})},n.getMobileStyleOfButton=function(){return{margin:"3px 0px"}},n.state=E,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({date:this.getFormatDate(new Date),dateRegion1:this.getFormatDate(new Date),dateRegion2:this.getFormatDate(new Date),startStandardDate:this.getFormatDate(new Date),endStandardDate:this.getFormatDate(new Date)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.startStandardDate,n=t.endStandardDate,s=d.isMobile();return o.a.createElement("div",null,o.a.createElement("div",{className:"form-row",style:{margin:"5px",overflowY:s?"scroll":"unset"}},o.a.createElement("button",{type:"button",className:"btn btn-info from-group col-md-2",style:{margin:"3px 5px"},onClick:this.props.resetCallBack},"\u986f\u793a\u5168\u90e8 Stock "),o.a.createElement("div",{style:{margin:"5px",float:"left",display:"flex",alignItems:"center",width:d.isMobile()?"100%":"auto"}},o.a.createElement("div",null,"\u8d77\u59cb\u5340\u9593:"),o.a.createElement("div",{className:"col"},o.a.createElement("input",{type:"date",className:"form-control",placeholder:"\u65e5\u671f",onChange:function(t){return e.handleStartDateChange(t.target.value)},value:a}))),o.a.createElement("div",{style:{margin:"5px",float:"left",display:"flex",alignItems:"center",width:d.isMobile()?"100%":"auto"}},o.a.createElement("div",null,"\u7d50\u675f\u5340\u9593:"),o.a.createElement("div",{className:"col"},o.a.createElement("input",{type:"date",className:"form-control",placeholder:"\u65e5\u671f",onChange:function(t){return e.handleEndDateChange(t.target.value)},value:n}))),o.a.createElement("div",{className:"btn-group btn-group-toggle"+(s?" from-group col-md-6":" from-group col-md-2"),"data-toggle":"buttons",style:Object(p.a)({margin:"0px 10px",zIndex:0},this.getMobileStyleOfButton())},o.a.createElement("label",{className:"btn btn-secondary active",onClick:this.getSaleOptions},o.a.createElement("input",{type:"radio",name:"saleOption",id:"saleOption1",value:"all",autoComplete:"off"})," \u5168\u90e8"),o.a.createElement("label",{className:"btn btn-secondary",onClick:this.getSaleOptions},o.a.createElement("input",{type:"radio",name:"saleOption",id:"saleOption2",value:"sale",autoComplete:"off"})," \u5df2\u8ce3\u51fa"),o.a.createElement("label",{className:"btn btn-secondary",onClick:this.getSaleOptions},o.a.createElement("input",{type:"radio",name:"saleOption",id:"saleOption3",value:"unsale",autoComplete:"off"})," \u672a\u8ce3\u51fa")),o.a.createElement("div",{className:"btn-group btn-group-toggle from-group col-md-2","data-toggle":"buttons",style:Object(p.a)({margin:"0px 10px",zIndex:0},this.getMobileStyleOfButton())},o.a.createElement("label",{className:"btn btn-warning active",onClick:this.getStockOptions},o.a.createElement("input",{type:"radio",name:"stockOption",id:"individual",value:"individual",autoComplete:"off"})," \u500b\u5225\u80a1")),o.a.createElement("button",{className:"btn btn-primary "+(s?" from-group col-md-2":" from-group col-md-1"),type:"submit",style:{margin:"3px 5px"},onClick:this.queryRegion},"\u67e5\u8a62\u9001\u51fa")))}}]),a}(n.Component),w={allData:[],allStocks:"",isQueryOpen:!1},C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).queryData=function(e){return n.props.queryDataCallback(e)},n.delete=function(e){n.props.deleteCallback(e)},n.isQueryOpen=function(e){return n.setState({isQueryOpen:e})},n.getQueryStatus=function(){return!d.isMobile()||n.state.isQueryOpen},n.state=w,n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){}},{key:"componentDidMount",value:function(){var e=this.props;e&&this.setState({allStocks:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.allStocks,n=t.route,s=this.state.isQueryOpen,r=d.isMobile();return o.a.createElement("div",null,"summary"===n&&!s&&r&&o.a.createElement("button",{className:"btn btn-warning from-group col-md-2",type:"submit",onClick:function(){return e.isQueryOpen(!0)}},"\u67e5\u8a62\u6642\u5340"),"summary"===n&&s&&r&&o.a.createElement("button",{className:"btn btn-secondary from-group col-md-2",type:"submit",onClick:function(){return e.isQueryOpen(!1)}},"\u96b1\u85cf"),"summary"===n&&this.getQueryStatus()&&o.a.createElement(D,{callback:this.queryData,resetCallBack:this.props.resetCallBack}),o.a.createElement("div",{style:{overflowY:d.isMobile()?"scroll":"unset"}},o.a.createElement("table",{className:"table table-dark"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{scope:"col"},"#"),!this.props.hideFiled&&o.a.createElement("th",{scope:"col"},"\u8ce3\u51fa"),"sale"===this.props.saleStatus?o.a.createElement("th",{scope:"col"},"\u8ce3\u51fa\u65e5\u671f"):o.a.createElement("th",{scope:"col"},"\u8cfc\u8cb7\u65e5\u671f"),o.a.createElement("th",{scope:"col"},"\u80a1\u7968\u540d\u7a31"),o.a.createElement("th",{scope:"col"},"\u7de8\u865f"),o.a.createElement("th",{scope:"col"},"\u5e73\u5747\u55ae\u50f9"),o.a.createElement("th",{scope:"col"},"\u5f35\u6578"),o.a.createElement("th",{scope:"col"},"\u624b\u7e8c\u8cbb"),o.a.createElement("th",{scope:"col"},"\u8cfc\u8cb7\u6210\u672c"),o.a.createElement("th",{scope:"col"},"\u72c0\u614b"),o.a.createElement("th",{scope:"col"},"\u8ce3\u51fa\u7e3d\u50f9"),o.a.createElement("th",{scope:"col"},"\u640d\u76ca"),o.a.createElement("th",{scope:"col"},"\u522a\u9664"))),o.a.createElement("tbody",null,!!a&&0!==a.length&&a.map((function(t,a){return o.a.createElement(y,{hideFiled:e.props.hideFiled,saleStatus:e.props.saleStatus,key:t.number+a,stock:t,index:a+1,stockSaleCallback:e.props.saleStockCallback,delete:function(t){return e.delete(t)}})}))))))}}]),a}(n.Component),x=a(8),N=a.n(x),O=a(12),F=a(15),j=(a(42),a(34),a(36),a(38),{apiKey:"AIzaSyCHZGM1JyAUp_8_lm4OQFLviuiXFJJto5o",authDomain:"stock-f7053.firebaseapp.com",databaseURL:"https://stock-f7053.firebaseio.com",projectId:"stock-f7053",storageBucket:"stock-f7053.appspot.com",messagingSenderId:"1056992757888",appId:"1:1056992757888:web:2067426b1bcf54fd7c3e65",measurementId:"G-V0QBQ3VNJF"});console.log(j),F.initializeApp(j),F.analytics();var M,A=F.database().ref("/stockInfo"),I={getAllData:function(){return Object(O.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.once("value").then((function(e){var t=[];e.forEach((function(e){t.unshift(e.val())}));var a=t.sort((function(e,t){return e.date<t.date?1:-1})),n=a.filter((function(e){return"sale"!==e.status})).sort((function(e,t){return e.date<t.date?1:-1})),o=a.filter((function(e){return"sale"===e.status})).sort((function(e,t){return e.sale_date<t.sale_date?1:-1}));if(t){var s=0,r=0,l=0;for(var i in t)s+="unsale"===t[i].status?t[i].cost:0;for(var c in t)r+="sale"===t[c].status?t[c].income:0,l+="sale"===t[c].status?t[c].cost:0;M={showStocks:t,allStocks:t,saleStocks:o,unSaleStocks:n,totalCost:s,profitAndLoss:r,saleCost:l,profit:(r/l*100).toFixed(2)}}}));case 2:return e.abrupt("return",M);case 3:case"end":return e.stop()}}),e)})))()},insertNewData:function(e){return Object(O.a)(N.a.mark((function t(){var a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Math.floor(Date.now()/1e3),t.next=3,A.child(a.toString()).set({timestamp:a,date:e.date,name:e.name,number:e.number,price:e.price,sheet:e.sheet,cost:Math.round(1e3*e.price*e.sheet*1.001425),income:0,sale_cost:0,sale_date:0,sale_price:0,sale_sheet:0,status:"unsale"}).then((function(){console.log("\u65b0\u589ePost\u6210\u529f")})).catch((function(e){console.error("\u65b0\u589ePost\u932f\u8aa4\uff1a",e)}));case 3:case"end":return t.stop()}}),t)})))()},deleteStock:function(e){return Object(O.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A.child("".concat(e)).remove().then((function(){console.log("\u522a\u9664\u6210\u529f")})).catch((function(e){console.error("\u522a\u9664\u932f\u8aa4\uff1a",e)}));case 1:case"end":return t.stop()}}),t)})))()},updateStock:function(e,t,a){var n=this;return Object(O.a)(N.a.mark((function o(){return N.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,A.update({income:Math.round(1e3*e*t-1e3*e*t*.004425-a.cost),sale_cost:Math.round(1e3*e*t-1e3*e*t*.004425),sale_date:n.getFormatDate(new Date),sale_price:e,sale_sheet:t,status:"sale"});case 2:case"end":return o.stop()}}),o)})))()}},_={inputData:[],unSaleStocks:[],saleStocks:[],allStocks:[],showStocks:[],totalCost:0,route:"home",profitAndLoss:0,profit:0,saleCost:0,saleIsOpen:!1,saleStatus:"all"},R=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).updateAllData=function(){I.getAllData().then((function(e){n.setState({saleStatus:"all",showStocks:e.showStocks,allStocks:e.allStocks,saleStocks:e.saleStocks,unSaleStocks:e.unSaleStocks,totalCost:e.totalCost,profitAndLoss:e.profitAndLoss,saleCost:e.saleCost,profit:(e.profitAndLoss/e.saleCost*100).toFixed(2)})}))},n.inputData=function(e){var t=Object(c.a)(n);I.insertNewData(e).then((function(){t.updateAllData()}))},n.deleteStock=function(e){I.deleteStock(e).then((function(){return n.updateAllData()}))},n.saleStock=function(e,t,a){I.updateStock(e,t,a).then((function(){return n.updateAllData()}))},n.changeRoute=function(e){n.setState({route:e})},n.getFormatDate=function(e){return e.getFullYear()+"-"+g.toDualDigit(e.getMonth()+1)+"-"+g.toDualDigit(e.getDate())},n.updateQueryData=function(e){var t=n.state,a=t.allStocks,o=t.unSaleStocks,s=t.saleStocks,r=e.dateRegion1,l=e.dateRegion2,i=0,c=0,u=0;if(n.setState({saleStatus:e.saleStatus}),"individual"===e.stockStatus)switch(e.saleStatus){case"all":var m=a.filter((function(e){return r<=e.date&&e.date<=l}));for(var p in m)m[p].cost,u+=m[p].income,c+=m[p].sale_cost;for(var d in m)i=(u/c*100).toFixed(2);n.setState({showStocks:m,profit:i,saleCost:c,profitAndLoss:u});break;case"sale":var h=s.filter((function(e){return r<=e.sale_date&&e.sale_date<=l}));for(var f in h)h[f].cost,u+=h[f].income,c+=h[f].sale_cost;for(var b in h)i=(u/c*100).toFixed(2);n.setState({showStocks:h,profit:i,saleCost:c,profitAndLoss:u});break;case"unsale":var g=o.filter((function(e){return r<=e.date&&e.date<=l}));for(var v in g)g[v].cost,u+=g[v].income,c+=g[v].sale_cost;for(var k in g)i=(u/c*100).toFixed(2);n.setState({showStocks:g,profit:i,saleCost:c,profitAndLoss:u})}else e.stockStatus},n.reset=function(){return n.updateAllData()},n.saleIsOpen=function(){return n.setState({saleIsOpen:!n.state.saleIsOpen})},n.getSaleIsStatus=function(){return!d.isMobile()||n.state.saleIsOpen},n.state=_,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.updateAllData()}},{key:"render",value:function(){var e=this,t=this.state.inputData,a=this.state.unSaleStocks,n=this.state.showStocks;return o.a.createElement("div",{className:"App",style:{height:window.innerHeight,margin:"0 auto"}},o.a.createElement(f,{totalCost:this.state.totalCost,profitAndLoss:this.state.profitAndLoss,route:this.state.route,changeRoute:this.changeRoute,profit:this.state.profit,saleCost:this.state.saleCost}),d.isMobile()&&!this.state.saleIsOpen&&"home"===this.state.route&&o.a.createElement("button",{className:"btn btn-warning from-group col-md-2 input-sale-frame",type:"submit",onClick:function(){return e.saleIsOpen(!0)}},"\u8cb7\u5165"),d.isMobile()&&this.state.saleIsOpen&&"home"===this.state.route&&o.a.createElement("button",{className:"btn btn-secondary from-group col-md-2 input-sale-frame",type:"submit",onClick:function(){return e.saleIsOpen(!1)}},"\u96b1\u85cf"),this.getSaleIsStatus()&&"home"===this.state.route&&o.a.createElement(k,{callback:this.inputData}),"home"===this.state.route&&o.a.createElement(C,{hideFiled:!1,inputData:t,allStocks:a,deleteCallback:this.deleteStock,saleStockCallback:this.saleStock}),"summary"===this.state.route&&o.a.createElement(C,{hideFiled:!0,saleStatus:this.state.saleStatus,inputData:t,allStocks:n,deleteCallback:this.deleteStock,saleStockCallback:this.saleStock,route:this.state.route,queryDataCallback:this.updateQueryData,resetCallBack:this.reset}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.ebc7a1ac.chunk.js.map